<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Concurrent Twin Primes From HELL: prime_parallel_1core.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Concurrent Twin Primes From HELL
   &#160;<span id="projectnumber">0.6</span>
   </div>
   <div id="projectbrief">use concurrency to output TwinPrimes</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('prime__parallel__1core_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">prime_parallel_1core.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;iostream&gt;</code><br />
<code>#include &lt;vector&gt;</code><br />
<code>#include &lt;cstdlib&gt;</code><br />
<code>#include &lt;cstring&gt;</code><br />
<code>#include &lt;cmath&gt;</code><br />
<code>#include &lt;chrono&gt;</code><br />
<code>#include &lt;omp.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Finding Prime Pairs</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrp6ea47404e0a15d1dce8d8fc1f9f0c555"></a></p>
<h1><a class="anchor" id="Using"></a>
C++ and OpenMP, write a parallel program that counts the number of primes less than n for any number n</h1>
<p>and also find and list all the twin primes (5,7), (11,13) less than n. The main objective is to use parallel programming to produce efficient code using multiple threads. The finished program is timed and rated while using different amounts of threads. The Max threads for my machine is 6. </p><dl class="section copyright"><dt>Copyright</dt><dd>License: This work is licensed under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License. To view a copy of this license, visit <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">http://creativecommons.org/licenses/by-nc-sa/4.0/</a>. </dd></dl>
<h1><a class="anchor" id="dep_sec"></a>
Dependencies</h1>
<p>Linux, G++, fopenmp, gdp debuging and make (makefile), doxygen </p>
<h1><a class="anchor" id="install_sec"></a>
Installation</h1>
<p>Installation can be done in the CLI running Makefile -k And Run by using ./prime_parallel_1core in the CLI. </p>
</td></tr>
<tr class="memitem:a7735206bdfad487588bba2126b806ab7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prime__parallel__1core_8cpp.html#a7735206bdfad487588bba2126b806ab7">NUM_THREADS</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:a7735206bdfad487588bba2126b806ab7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa92bafe21dc1a8b8ebb6243cbcd21072"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prime__parallel__1core_8cpp.html#aa92bafe21dc1a8b8ebb6243cbcd21072">printTP</a> (vector&lt; int &gt;primeNumbers)</td></tr>
<tr class="memdesc:aa92bafe21dc1a8b8ebb6243cbcd21072"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to have the vector primepairs out put onto the console.  <a href="prime__parallel__1core_8cpp.html#aa92bafe21dc1a8b8ebb6243cbcd21072">More...</a><br /></td></tr>
<tr class="separator:aa92bafe21dc1a8b8ebb6243cbcd21072"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabce565601766c91f8ee8c0634ab7745"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prime__parallel__1core_8cpp.html#aabce565601766c91f8ee8c0634ab7745">Eratosethenes_sieve</a> (bool *sieve, int numbers)</td></tr>
<tr class="memdesc:aabce565601766c91f8ee8c0634ab7745"><td class="mdescLeft">&#160;</td><td class="mdescRight">this function will take in a number n and calculate the primes up until that number and add them to the global vector primes  <a href="prime__parallel__1core_8cpp.html#aabce565601766c91f8ee8c0634ab7745">More...</a><br /></td></tr>
<tr class="separator:aabce565601766c91f8ee8c0634ab7745"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="prime__parallel__1core_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a> ()</td></tr>
<tr class="memdesc:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">In main we will run our functions together without any concurrency as it is producing segmentation errors while filling the vector with primes.  <a href="prime__parallel__1core_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">More...</a><br /></td></tr>
<tr class="separator:ae66f6b31b5ad750f1fe042a706a4e3d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a7735206bdfad487588bba2126b806ab7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7735206bdfad487588bba2126b806ab7">&#9670;&nbsp;</a></span>NUM_THREADS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_THREADS&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="aabce565601766c91f8ee8c0634ab7745"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aabce565601766c91f8ee8c0634ab7745">&#9670;&nbsp;</a></span>Eratosethenes_sieve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void Eratosethenes_sieve </td>
          <td>(</td>
          <td class="paramtype">bool *&#160;</td>
          <td class="paramname"><em>sieve</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>numbers</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>this function will take in a number n and calculate the primes up until that number and add them to the global vector primes </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sieve</td><td>is a boolean that tells us if the multiples of number have been crossed, therefore, no need to check them. </td></tr>
    <tr><td class="paramname">number</td><td>is the amount of numbers to go through.</td></tr>
  </table>
  </dd>
</dl>
<p>The simplest way to run this algorithm is to use dynamic scheduling built in OpenMP. This scheduling gives the faster threads beefier workloads.A loop is split into seperate tasks which are performed by different threads. The first loop goes from 2 to the square root of number. And if sieve is unmarked we know it's a prime. In the second loop all multiples of number are marked as composite, however this loop shouldn't be made to run parallel, break statement cannot run in openMP inside of threaded for loops. It was tried regardless and it decreased efficiency by a large margin, so, don't do this. Primes can be added to a vector later and output with another function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sieve</td><td>is a boolean that tells us if the multiples of number have been crossed, therefore, no need to check them. </td></tr>
    <tr><td class="paramname">number</td><td>is the amount of numbers to go through. </td></tr>
  </table>
  </dd>
</dl>
<h1><a class="anchor" id="Sequential"></a>
Sequential</h1>
<p>The first loop goes from 2 to the square root of number. And if sieve is unmarked we know it's a prime. In the second loop all multiples of number are marked as composite number. Primes can be added to a vector later and output with another function. </p>

</div>
</div>
<a id="ae66f6b31b5ad750f1fe042a706a4e3d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae66f6b31b5ad750f1fe042a706a4e3d4">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>In main we will run our functions together without any concurrency as it is producing segmentation errors while filling the vector with primes. </p>
<p>In main we will run our functions together.</p>
<p>Take in a number from the user, start the timer using chrono. Using our function Eratosethenes_sieve, we then produce primes into a vector called prime. Next the primes are printed usaing printTP.. There was no specification for ordering which suits my need for speed perefctly fine. Finishing up we display the amount of twin primes, normal primes and the time taken to run. In linux the "time ./%" function is used to give cpu and elapsed time so conclusions can be easily drawn on the go.</p>
<h1><a class="anchor" id="Sequential"></a>
Sequential</h1>
<p>Take in a number from the user, start the timer using chrono. Using our function Eratosethenes_sieve, we then produce primes into a vector called prime. Next the primes are printed usaing printTP.. Finishing up we display the amount of twin primes, normal primes and the time taken to run. In linux the "time ./%" function is used to give cpu and elapsed time so conclusions can be easily drawn on the go. </p>

</div>
</div>
<a id="aa92bafe21dc1a8b8ebb6243cbcd21072"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa92bafe21dc1a8b8ebb6243cbcd21072">&#9670;&nbsp;</a></span>printTP()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void printTP </td>
          <td>(</td>
          <td class="paramtype">vector&lt; int &gt;&#160;</td>
          <td class="paramname"><em>primeNumbers</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to have the vector primepairs out put onto the console. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vector&lt;int&gt;primeNumbers</td><td>this is a vector which holds the prime pairs to be printed</td></tr>
  </table>
  </dd>
</dl>
<p>Trying to use openMP here created a mixed up output has the threads were printing at different times thus, 2 pairs would become interwoven. It also reduces efficiency</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">vector&lt;int&gt;primeNumbers</td><td>this is a vector which holds the prime pairs to be printed </td></tr>
  </table>
  </dd>
</dl>
<h1><a class="anchor" id="Sequential"></a>
Sequential</h1>
<p>Function to have the vector primepairs out put onto the console </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="prime__parallel__1core_8cpp.html">prime_parallel_1core.cpp</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
